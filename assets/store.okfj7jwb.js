import{$ as c,y as p,a0 as g,K as m,a1 as y,a2 as h,l as q,k as w}from"./branches.B-b34qLj.js";function d(e,u,s){if(e==null)return u(void 0),c;const n=p(()=>e.subscribe(u,s));return n.unsubscribe?()=>n.unsubscribe():n}const o=[];function z(e,u=c){let s=null;const n=new Set;function i(t){if(g(e,t)&&(e=t,s)){const l=!o.length;for(const r of n)r[1](),o.push(r,e);if(l){for(let r=0;r<o.length;r+=2)o[r][0](o[r+1]);o.length=0}}}function f(t){i(t(e))}function _(t,l=c){const r=[t,l];return n.add(r),n.size===1&&(s=u(i,f)||c),t(e),()=>{n.delete(r),n.size===0&&s&&(s(),s=null)}}return{set:i,update:f,subscribe:_}}function S(e){let u;return d(e,s=>u=s)(),u}let b=!1,a=Symbol();function N(e,u,s){const n=s[u]??={store:null,source:h(void 0),unsubscribe:c};if(n.store!==e&&!(a in s))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=c;else{var i=!0;n.unsubscribe=d(e,f=>{i?n.source.v=f:w(n.source,f)}),i=!1}return e&&a in s?S(e):q(n.source)}function U(){const e={};function u(){m(()=>{for(var s in e)e[s].unsubscribe();y(e,a,{enumerable:!1,value:!0})})}return[e,u]}function $(e){var u=b;try{return b=!1,[e(),b]}finally{b=u}}export{N as a,$ as c,U as s,z as w};

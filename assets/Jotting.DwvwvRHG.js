import{i as T,s as rt}from"./attributes.CqD-9_mK.js";import{o as ot,m as it}from"./site.config.DmDszrUw.js";import{d as nt,s as G,p as ct,u as ut,f as h,t as x,a as g,b as dt,c as vt,e as m,g as t,h as I,i as n,r as o,j as b,k as d}from"./branches.Vxn5n2Nk.js";import{e as z,i as mt,I as y,s as C}from"./Icon.CBkt-HA8.js";import{a as X,t as ft,f as _t}from"./index.CZbdCZpo.js";import{i as pt,g as xt}from"./index.BD29CbIs.js";import{f as Y}from"./index.CoJ3gwjp.js";/* empty css                       */var gt=h('<button class="text-[0.825rem] text-remark"> </button>'),bt=h('<section class="flex flex-col justify-center border-b border-dashed border-b-weak pb-1"><span class="flex items-center gap-1"><!> <!> <a class="leading-normal text-primary font-semibold link truncate"> </a></span> <span class="flex gap-1"></span></section>'),ht=h('<div class="col-span-2 pt-[10vh] text-center text-secondary font-bold text-xl"> </div>'),kt=h("<button> </button>"),wt=h('<footer class="sticky bottom-0 flex items-center justify-center gap-3 mt-auto pb-1 text-weak bg-background font-mono svelte-17als4l"><button class="svelte-17als4l"><!></button> <button></button> <!> <!> <!> <button> </button> <button class="svelte-17als4l"><!></button></footer>'),Mt=h("<button> </button>"),yt=h('<main class="flex flex-col-reverse sm:flex-row gap-10 grow"><article class="flex flex-col grow svelte-17als4l"><header class="grid grid-cols-[repeat(auto-fill,minmax(250px,1fr))] gap-5"></header> <!></article> <aside class="sm:basis-[200px] flex flex-col gap-5 svelte-17als4l"><section class="svelte-17als4l"><h4> </h4> <p class="svelte-17als4l"></p></section></aside></main>');function zt(Z,S){vt(S,!0);const J=pt(S.locale);let H=G(!1),f=G(ct([])),K=I(()=>{let a=S.jottings.filter(r=>t(f).every(c=>r.data.tags?.includes(c))).sort((r,c)=>c.data.top-r.data.top||c.data.timestamp.getTime()-r.data.timestamp.getTime());if(!t(H))return a;let e=new URLSearchParams;e.set("page",String(t(l)));for(const r of t(f))e.append("tag",r);let s=`${location.pathname}?${e.toString()}`;return window.history.replaceState({url:s,random:Math.random(),source:"swup"},"",s),a});const N=20;let v=I(()=>Math.ceil(t(K).length/N)),l=G(1);ut(()=>{m(l,Math.max(1,Math.min(Math.floor(t(l)),t(v))),!0)});let $=I(()=>t(K).slice((t(l)-1)*N,t(l)*N));function O(a,e){let s=t(f).includes(a);e===void 0&&(e=!s),m(f,e?s?t(f):[...t(f),a]:t(f).filter(r=>r!==a),!0)}ot(()=>{const a=new URLSearchParams(window.location.search);m(l,Number(a.get("page"))||1,!0),m(f,a.getAll("tag"),!0),m(H,!0)});var q=yt(),B=n(q),D=n(B);z(D,29,()=>t($),a=>a.id,(a,e)=>{var s=bt(),r=n(s),c=n(r);{var k=i=>{y(i,{name:"lucide--flag-triangle-right",class:"rtl:-scale-x-100"})};T(c,i=>{t(e).data.top>0&&i(k)})}var j=d(c,2);{var F=i=>{{let _=I(()=>J("sensitive.icon"));y(i,{name:"lucide--siren",get title(){return t(_)}})}};T(j,i=>{t(e).data.sensitive&&i(F)})}var w=d(j,2),U=n(w,!0);o(w),o(r);var A=d(r,2);z(A,21,()=>t(e).data.tags,mt,(i,_)=>{var M=gt();M.__click=()=>O(t(_),!0);var L=n(M);o(M),x(()=>b(L,`#${t(_)??""}`)),g(i,M)}),o(A),o(s),x(i=>{rt(w,"href",i),b(U,t(e).data.title)},[()=>xt(S.locale,`/jotting/${it?t(e).id:t(e).id.split("/").slice(1).join("/")}`)]),X(s,()=>Y,()=>({duration:150})),g(a,s)},a=>{var e=ht(),s=n(e,!0);o(e),x(r=>b(s,r),[()=>J("jotting.empty")]),g(a,e)}),o(D);var tt=d(D,2);{var et=a=>{var e=wt(),s=n(e);s.__click=()=>m(l,Math.max(1,t(l)-1),!0);var r=n(s);y(r,{name:"lucide--arrow-left",class:"rtl:-scale-x-100"}),o(s);var c=d(s,2);c.__click=()=>m(l,1);let k;c.textContent="1";var j=d(c,2);{var F=u=>{y(u,{name:"lucide--ellipsis"})};T(j,u=>{t(v)>7&&t(l)>4&&u(F)})}var w=d(j,2);z(w,24,()=>Array.from({length:Math.min(5,t(v)-2)},(u,R)=>R+Math.max(2,Math.min(t(v)-5,t(l)-2))),u=>u,(u,R)=>{var p=kt();p.__click=()=>m(l,R,!0);let W;var lt=n(p,!0);o(p),x(()=>{W=C(p,1,"svelte-17als4l",null,W,{location:R==t(l)}),b(lt,R)}),X(p,()=>Y,()=>({duration:150})),ft(3,p,()=>_t,()=>({duration:150})),g(u,p)});var U=d(w,2);{var A=u=>{y(u,{name:"lucide--ellipsis"})};T(U,u=>{t(v)>7&&t(l)<t(v)-3&&u(A)})}var i=d(U,2);i.__click=()=>m(l,t(v),!0);let _;var M=n(i,!0);o(i);var L=d(i,2);L.__click=()=>m(l,Math.min(t(v),t(l)+1),!0);var st=n(L);y(st,{name:"lucide--arrow-right",class:"rtl:-scale-x-100"}),o(L),o(e),x(()=>{k=C(c,1,"svelte-17als4l",null,k,{location:t(l)==1}),_=C(i,1,"svelte-17als4l",null,_,{location:t(v)==t(l)}),b(M,t(v))}),g(a,e)};T(tt,a=>{t(v)>1&&a(et)})}o(B);var P=d(B,2),Q=n(P),E=n(Q),at=n(E,!0);o(E);var V=d(E,2);z(V,20,()=>S.tags,a=>a,(a,e)=>{var s=Mt();s.__click=()=>O(e);let r;var c=n(s,!0);o(s),x(k=>{r=C(s,1,"svelte-17als4l",null,r,k),b(c,e)},[()=>({selected:t(f).includes(e)})]),g(a,s)}),o(V),o(Q),o(P),o(q),x(a=>b(at,a),[()=>J("jotting.tag")]),g(Z,q),dt()}nt(["click"]);export{zt as default};

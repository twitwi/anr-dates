import{i as j,s as rt}from"./attributes.CqD-9_mK.js";import{o as _t,m as ft}from"./site.config.DmDszrUw.js";import{d as pt,s as B,p as xt,u as gt,f as h,t as w,a as g,b as ht,c as bt,e as m,g as t,j as f,k as u,i,h as C,r}from"./branches.Vxn5n2Nk.js";import{e as N,i as wt,I as R,s as z}from"./Icon.CBkt-HA8.js";import{a as lt,t as kt,f as qt}from"./index.CZbdCZpo.js";import{i as yt,g as Mt}from"./index.BD29CbIs.js";import{f as it}from"./index.CoJ3gwjp.js";import{T as St}from"./time.CSvyldnN.js";/* empty css                       */var Tt=h("<button> </button>"),jt=h('<span class="my-0.5 mx-1 border-e-[1.5px] self-stretch"></span>'),Lt=h('<button class="text-[0.875rem] sm:text-sm"> </button>'),Rt=h('<section class="flex flex-col gap-2 sm:flex-row"><div class="flex flex-col gap-1"><div class="flex gap-1 items-center"><div class="inline-flex gap-1 items-center justify-center flex-wrap [&amp;:not(:has(*))]:hidden"><!> <!> <!></div> <!> <a class="link"> </a></div> <time class="font-mono text-[0.65rem] leading-none text-remark"> </time></div> <span class="inline-flex items-center sm:justify-end gap-1 flex-wrap content-start sm:ms-auto text-remark"></span></section>'),Ut=h('<div class="pt-[10vh] text-center text-secondary font-bold text-xl"> </div>'),At=h("<button> </button>"),Nt=h('<footer class="sticky bottom-0 flex items-center justify-center gap-3 mt-auto pb-1 text-weak bg-background font-mono svelte-qcpucw"><button class="svelte-qcpucw"><!></button> <button></button> <!> <!> <!> <button> </button> <button class="svelte-qcpucw"><!></button></footer>'),zt=h("<button> </button>"),It=h("<button> </button>"),Ot=h('<main class="flex flex-col-reverse sm:flex-row gap-10 grow"><article class="flex flex-col gap-4 grow svelte-qcpucw"><!> <!></article> <aside class="sm:basis-[200px] shrink-0 flex flex-col gap-5 svelte-qcpucw"><section class="svelte-qcpucw"><h4> </h4> <p class="svelte-qcpucw"></p></section> <section class="svelte-qcpucw"><h4> </h4> <p class="svelte-qcpucw"></p></section></aside></main>');function Pt(ot,L){bt(L,!0);const I=yt(L.locale);let W=B(!1),k=B(null),b=B(xt([])),X=C(()=>{let a=L.notes.filter(l=>{let n=!t(k)||l.data.series===t(k),p=t(b).every(y=>l.data.tags?.includes(y));return n&&p}).sort((l,n)=>n.data.top-l.data.top||n.data.timestamp.getTime()-l.data.timestamp.getTime());if(!t(W))return a;let e=new URLSearchParams;e.set("page",String(t(c))),t(k)&&e.set("series",t(k));for(const l of t(b))e.append("tag",l);let s=`${location.pathname}?${e.toString()}`;return window.history.replaceState({url:s,random:Math.random(),source:"swup"},"",s),a});const D=20;let _=C(()=>Math.ceil(t(X).length/D)),c=B(1);gt(()=>{m(c,Math.max(1,Math.min(Math.floor(t(c)),t(_))),!0)});let ct=C(()=>t(X).slice((t(c)-1)*D,t(c)*D));function Y(a,e){let s=t(b).includes(a);e===void 0&&(e=!s),m(b,e?s?t(b):[...t(b),a]:t(b).filter(l=>l!==a),!0)}function Z(a,e){e===void 0&&(e=t(k)!==a),m(k,e?a:null,!0)}_t(()=>{const a=new URLSearchParams(window.location.search);m(c,Number(a.get("page"))||1,!0),m(k,a.get("series"),!0),m(b,a.getAll("tag"),!0),m(W,!0)});var E=Ot(),F=i(E),$=i(F);N($,25,()=>t(ct),a=>a.id,(a,e)=>{var s=Rt(),l=i(s),n=i(l),p=i(n),y=i(p);{var K=o=>{R(o,{name:"lucide--flag-triangle-right",class:"rtl:-scale-x-100"})};j(y,o=>{t(e).data.top>0&&o(K)})}var U=u(y,2);{var O=o=>{{let d=C(()=>I("sensitive.icon"));R(o,{name:"lucide--siren",get title(){return t(d)}})}};j(U,o=>{t(e).data.sensitive&&o(O)})}var P=u(U,2);{var M=o=>{var d=Tt();d.__click=()=>Z(t(e).data.series,!0);var q=i(d,!0);r(d),w(()=>f(q,t(e).data.series)),g(o,d)};j(P,o=>{t(e).data.series&&o(M)})}r(p);var A=u(p,2);{var Q=o=>{var d=jt();g(o,d)};j(A,o=>{t(e).data.series&&o(Q)})}var S=u(A,2),V=i(S,!0);r(S),r(n);var v=u(n,2),T=i(v,!0);r(v),r(l);var x=u(l,2);N(x,21,()=>t(e).data.tags,wt,(o,d)=>{var q=Lt();q.__click=()=>Y(t(d),!0);var mt=i(q);r(q),w(()=>f(mt,`#${t(d)??""}`)),g(o,q)}),r(x),r(s),w((o,d,q)=>{rt(S,"href",o),f(V,t(e).data.title),rt(v,"datetime",d),f(T,q)},[()=>Mt(L.locale,`/note/${ft?t(e).id:t(e).id.split("/").slice(1).join("/")}`),()=>t(e).data.timestamp.toISOString(),()=>St(t(e).data.timestamp)]),lt(s,()=>it,()=>({duration:150})),g(a,s)},a=>{var e=Ut(),s=i(e,!0);r(e),w(l=>f(s,l),[()=>I("note.empty")]),g(a,e)});var nt=u($,2);{var ut=a=>{var e=Nt(),s=i(e);s.__click=()=>m(c,Math.max(1,t(c)-1),!0);var l=i(s);R(l,{name:"lucide--arrow-left",class:"rtl:-scale-x-100"}),r(s);var n=u(s,2);n.__click=()=>m(c,1);let p;n.textContent="1";var y=u(n,2);{var K=v=>{R(v,{name:"lucide--ellipsis"})};j(y,v=>{t(_)>7&&t(c)>4&&v(K)})}var U=u(y,2);N(U,24,()=>Array.from({length:Math.min(5,t(_)-2)},(v,T)=>T+Math.max(2,Math.min(t(_)-5,t(c)-2))),v=>v,(v,T)=>{var x=At();x.__click=()=>m(c,T,!0);let o;var d=i(x,!0);r(x),w(()=>{o=z(x,1,"svelte-qcpucw",null,o,{location:T==t(c)}),f(d,T)}),lt(x,()=>it,()=>({duration:150})),kt(3,x,()=>qt,()=>({duration:150})),g(v,x)});var O=u(U,2);{var P=v=>{R(v,{name:"lucide--ellipsis"})};j(O,v=>{t(_)>7&&t(c)<t(_)-3&&v(P)})}var M=u(O,2);M.__click=()=>m(c,t(_),!0);let A;var Q=i(M,!0);r(M);var S=u(M,2);S.__click=()=>m(c,Math.min(t(_),t(c)+1),!0);var V=i(S);R(V,{name:"lucide--arrow-right",class:"rtl:-scale-x-100"}),r(S),r(e),w(()=>{p=z(n,1,"svelte-qcpucw",null,p,{location:t(c)==1}),A=z(M,1,"svelte-qcpucw",null,A,{location:t(_)==t(c)}),f(Q,t(_))}),g(a,e)};j(nt,a=>{t(_)>1&&a(ut)})}r(F);var tt=u(F,2),G=i(tt),H=i(G),vt=i(H,!0);r(H);var et=u(H,2);N(et,20,()=>L.series,a=>a,(a,e)=>{var s=zt();s.__click=()=>Z(e);let l;var n=i(s,!0);r(s),w(()=>{l=z(s,1,"svelte-qcpucw",null,l,{selected:e==t(k)}),f(n,e)}),g(a,s)}),r(et),r(G);var at=u(G,2),J=i(at),dt=i(J,!0);r(J);var st=u(J,2);N(st,20,()=>L.tags,a=>a,(a,e)=>{var s=It();s.__click=()=>Y(e);let l;var n=i(s,!0);r(s),w(p=>{l=z(s,1,"svelte-qcpucw",null,l,p),f(n,e)},[()=>({selected:t(b).includes(e)})]),g(a,s)}),r(st),r(at),r(tt),r(E),w((a,e)=>{f(vt,a),f(dt,e)},[()=>I("note.series"),()=>I("note.tag")]),g(ot,E),ht()}pt(["click"]);export{Pt as default};
